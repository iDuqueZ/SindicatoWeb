---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE } from '../consts';

// Obtener lista de PDFs de la carpeta public/documentos
import fs from 'fs';
import path from 'path';

// Ajuste de la ruta para asegurar compatibilidad en build y dev
const documentosDir = path.join(process.cwd(), 'public', 'documentos');
let pdfs: string[] = [];
try {
  pdfs = fs.readdirSync(documentosDir)
    .filter(file => file.toLowerCase().endsWith('.pdf'));
} catch (e) {
  pdfs = [];
}
---

<!doctype html>
<html lang="es">
  <head>
    <BaseHead title={`Acuerdos | ${SITE_TITLE}`} description="Acuerdos firmados por el sindicato" />
  </head>
  <body>
    <Header />
    <main class="max-w-3xl mx-auto py-8 px-4">
      <h1 class="text-2xl font-bold mb-4">Acuerdos</h1>
      <p class="mb-8">Tu sindicato hermoso ha firmado estas cosas para ti.</p>
      <ul>
        {pdfs.length === 0 && <li>No hay acuerdos disponibles.</li>}
        {pdfs.map((pdf) => (
          <li class="mb-2">
            <a href={`/documentos/${encodeURIComponent(pdf)}`} target="_blank" rel="noopener" class="text-blue-700 underline flex items-center gap-2">
              ðŸ“„ {pdf}
            </a>
          </li>
        ))}
      </ul>
    </main>
    <Footer />
  </body>
</html>
